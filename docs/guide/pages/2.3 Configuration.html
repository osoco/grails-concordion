<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>2.3 Configuration</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    There are a couple configuration options for the plugin:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">System property</strong></th><th><strong class="bold">Default value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>concordion.output.dir</td><td><code>target/test-reports/concordion</code></td><td>the folder where test reports are generated</td></tr><tr class="table-even"><td>concordion.extensions</td><td><code>org.concordion.ext.Extensions</code> (use the default configuration of each extension in the concordion-extensions project)</td><td>list of Concordion extensions and/or extension factories separated by commas</td></tr></table><p class="paragraph"/><h4>Concordion extensions</h4><p class="paragraph"/>The plugin also provides another way to configure extensions through application's configuration 
instead of the <code>concordion.extensions</code> system property. You can specify the list of extensions and/or extension factories to use with the following entries in <code>BuildConfig.groovy</code>:<p class="paragraph"/><div class="code"><pre>concordion.extensions = &#91; <span class="java&#45;quote">"Extension1"</span>, <span class="java&#45;quote">"Extension2"</span> &#93;
concordion.extensionFactories = &#91; <span class="java&#45;quote">"ExtensionFactory1"</span>, <span class="java&#45;quote">"ExtensionFactory2"</span> &#93;</pre></div><p class="paragraph"/><blockquote class="note">Note that you should provide fully qualified class names.</blockquote><p class="paragraph"/>If you want to configure the LoggingTooltipExtension or the ScreenshotExtension provided 
by the concordion-extensions project, the plugin includes configurable factories 
(<code>es.osoco.grails.plugins.concordion.extensions.ConfigurableLoggingTooltipExtensionFactory</code> 
and <code>es.osoco.grails.plugins.concordion.extensions.CongigurableScreenshotExtensionFactory</code>) to avoid
you have to implement your own factories and can configure the extensions through a simple DSL in
<code>BuildConfig</code>. For example:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> java.util.logging.Level<p class="paragraph"/>concordion.extensionFactories = &#91; 
  <span class="java&#45;quote">"es.osoco.grails.plugins.concordion.extensions.ConfigurableScreenshotExtensionFactory"</span>,
  <span class="java&#45;quote">"es.osoco.grails.plugins.concordion.extensions.ConfigurableLoggingTooltipExtensionFactory"</span> &#93;<p class="paragraph"/>concordion.screenshotExtensionFactoryConfiguration = &#123;
  screenshotOnThrowable <span class="java&#45;keyword">true</span>
  screenshotOnAssertionFailure <span class="java&#45;keyword">true</span>
  maxWidth 400
&#125;<p class="paragraph"/>concordion.loggingTooltipExtensionFactoryConfiguration = &#123;
  loggers <span class="java&#45;quote">"org.example.pomodoro.pages, selenium.events"</span>
  level Level.FINE
  showConsoleLogging <span class="java&#45;keyword">true</span>
&#125;</pre></div><p class="paragraph"/>The following table shows the configuration options available to configure the <code>ConfigurableScreenshotExtensionFactory</code>:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Option</strong></th><th><strong class="bold">Default value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>screenshotOnAssertionFailure</td><td><code>true</code></td><td>Sets whether screenshots will be embedded in the output when assertions fail.</td></tr><tr class="table-even"><td>screenshotOnAssertionSuccess</td><td><code>false</code></td><td>Sets whether screenshots will be embedded in the output when assertions pass.</td></tr><tr class="table-odd"><td>screenshotOnThrowable</td><td><code>true</code></td><td>Sets whether screenshots will be embedded in the output when uncaught Throwables occur in the test.</td></tr><tr class="table-even"><td>maxWidth</td><td>Any</td><td>Sets the maximum width that will be used for display of the images in the output.</td></tr><tr class="table-odd"><td>screenshotTaker</td><td>By default use <code>org.concordion.ext.screenshot.RobotScreenshotTaker</code> which will take a shot of the full visible screen.</td><td>Set a custom screenshot taker.</td></tr></table><p class="paragraph"/><blockquote class="note">
The plugin also includes an option to easily use <code>org.concordion.ext.selenium.SeleniumScreenshotTaker</code>, 
a custom <code>ScreenshotTaker</code> implementation that "ensures that only the browser window is captured, that the full browser page is captured and that it is captured regardless of whether the browser window is currently displayed".<p class="paragraph"/>For the moment, this configuration option is a bit tricky: <code>ConfigurableScreenshotExtensionFactory</code> assumes
that if a value for its <code>webDriver</code> property has been set then it should configure the before mentioned <code>SeleniumScreenshotTaker</code>. In other words, to configure this custom screenshot taker you should add the <code>ConfigurableScreenshotExtensionFactory</code> to the <code>concordion.extensionFactories</code> list in your <code>BuildConfig.groovy</code>:<p class="paragraph"/><div class="code"><pre>concordion.extensionFactories = &#91; <span class="java&#45;quote">"es.osoco.grails.plugins.concordion.extensions.ConfigurableScreenshotExtensionFactory"</span> &#93;</pre></div><p class="paragraph"/>And add an initialization method annotated with @BeforeClass to your test classes setting the ConfigurableScreenshotExtensionFactory's webDriver, as in the following example:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> es.osoco.grails.plugins.concordion.extensions.ConfigurableScreenshotExtensionFactory<p class="paragraph"/><span class="java&#45;keyword">import</span> org.openqa.selenium.WebDriver
<span class="java&#45;keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver<p class="paragraph"/><span class="java&#45;keyword">import</span> org.junit.BeforeClass<p class="paragraph"/><span class="java&#45;keyword">public</span> class YourConcordionTest &#123;<p class="paragraph"/>  WebDriver webDriver<p class="paragraph"/>  @BeforeClass
  <span class="java&#45;keyword">public</span> <span class="java&#45;keyword">static</span> void setup() &#123;
    webDriver = <span class="java&#45;keyword">new</span> FirefoxDriver()
    ConfigurableScreenshotExtensionFactory.webDriver = webDriver
  &#125;<p class="paragraph"/>  ...<p class="paragraph"/>&#125;</pre></div>
</blockquote><p class="paragraph"/>
The following table shows the configuration options available to configure the <code>ConfigurableLoggingTooltipExtensionFactory</code>:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Option</strong></th><th><strong class="bold">Default value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>loggers</td><td>Empty string (indicates the root logger).</td><td>A comma separated list of the names of loggers whose output is to be shown in the Concordion output.</td></tr><tr class="table-even"><td>level</td><td><code>Level.INFO</code></td><td>the logging <code>java.util.logging.Level</code> for the handler that writes to the Concordion output. Log messages of this level and higher will be output. Note that you need to import the <code>java.util.logging.Level</code> class in your <code>BuildConfig.groovy</code> to use this option.</td></tr><tr class="table-odd"><td>showConsoleLogging</td><td><code>false</code></td><td><code>false</code> to remove console output for the root logger, <code>true</code> to show the console output.</td></tr></table><p class="paragraph"/><p class="paragraph"/>
    </body>
</html>
