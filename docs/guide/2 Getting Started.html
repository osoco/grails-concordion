<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>2 Getting Started</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    <h1><a name="2 Getting Started">2 Getting Started</a></h1>The following sections describe how to install the plugin and its typical usage and configuration.<p class="paragraph"/><h2><a name="2.1 Installation">2.1 Installation</a></h2>You can install the plugin as usual in Grails:<p class="paragraph"/><div class="code"><pre>grails install&#45;plugin concordion</pre></div><p class="paragraph"/>The plugin will download some dependencies like Concordion, 
Concordion Extensions and some Selenium libraries required by these extensions.<p class="paragraph"/>If the directory <code>test/concordion</code> is missing in your project, the plugin will 
create it when is installed.<p class="paragraph"/>
<h2><a name="2.2 Usage">2.2 Usage</a></h2>
<h4>Create specifications</h4><p class="paragraph"/>The first step will be to create some specifications (acceptance tests) in the <code>test/concordion</code>
directory. You can create them manually or create a template using the 
<a href="../ref/Creation Scripts/create-concordion-test.html" class="Creation Scripts">create-concordion-test</a> script.<p class="paragraph"/>For instance, you can execute the command:<p class="paragraph"/><div class="code"><pre>grails create&#45;concordion&#45;test org.example.SimpleSpec</pre></div><p class="paragraph"/>This will generate a very simple template for an acceptance test, consisting on the specification file 
<code>SimpleSpec.html</code> and a fixture class <code>SimpleSpecTest.groovy</code>. Both files will be generated under the
<code>test/concordion/org/example</code> directory that the command will create if it does not exist.<p class="paragraph"/><h4>Run specifications</h4><p class="paragraph"/>Once you have one or more Concordion specs, you can run them using the new phase test concordion in
the following way:<p class="paragraph"/><div class="code"><pre>grails test&#45;app concordion:</pre></div><p class="paragraph"/>Running this command will start up the Grails application (this way your specifications can test the
web interface), launch all the Concordion specifications and return the results.<p class="paragraph"/>By default all tests are executed, but you can specify the names of the tests (without the "Tests" or other test type suffix) as argument to the command.<p class="paragraph"/>Beside the usual test reports generated at <code>target/test-reports/TESTS-TestSuites.xml</code>, <code>target/test-reports/plain</code> and <code>target/test-reports/html</code>, the Concordion tests will generate highly readable reports located
at <code>target/test-reports/concordion</code>.
<h2><a name="2.3 Configuration">2.3 Configuration</a></h2>There are a couple configuration options for the plugin:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">System property</strong></th><th><strong class="bold">Default value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>concordion.output.dir</td><td><code>target/test-reports/concordion</code></td><td>the folder where test reports are generated</td></tr><tr class="table-even"><td>concordion.extensions</td><td><code>org.concordion.ext.Extensions</code> (use the default configuration of each extension in the concordion-extensions project)</td><td>list of Concordion extensions and/or extension factories separated by commas</td></tr></table><p class="paragraph"/><h4>Concordion extensions</h4><p class="paragraph"/>The plugin also provides another way to configure extensions through application's configuration 
instead of the <code>concordion.extensions</code> system property. You can specify the list of extensions and/or extension factories to use with the following entries in <code>BuildConfig.groovy</code>:<p class="paragraph"/><div class="code"><pre>concordion.extensions = &#91; <span class="java&#45;quote">"Extension1"</span>, <span class="java&#45;quote">"Extension2"</span> &#93;
concordion.extensionFactories = &#91; <span class="java&#45;quote">"ExtensionFactory1"</span>, <span class="java&#45;quote">"ExtensionFactory2"</span> &#93;</pre></div><p class="paragraph"/><blockquote class="note">Note that you should provide fully qualified class names.</blockquote><p class="paragraph"/>If you want to configure the LoggingTooltipExtension or the ScreenshotExtension provided 
by the concordion-extensions project, the plugin includes configurable factories 
(<code>es.osoco.grails.plugins.concordion.extensions.ConfigurableLoggingTooltipExtensionFactory</code> 
and <code>es.osoco.grails.plugins.concordion.extensions.CongigurableScreenshotExtensionFactory</code>) to avoid
you have to implement your own factories and can configure the extensions through a simple DSL in
<code>BuildConfig</code>. For example:<p class="paragraph"/><div class="code"><pre>concordion.extensionFactories = &#91; 
  <span class="java&#45;quote">"es.osoco.grails.plugins.concordion.extensions.ConfigurableScreenshotExtensionFactory"</span>,
  <span class="java&#45;quote">"es.osoco.grails.plugins.concordion.extensions.ConfigurableLoggingTooltipExtensionFactory"</span> &#93;<p class="paragraph"/>concordion.screenshotExtensionFactoryConfiguration = &#123;
  screenshotOnThrowable <span class="java&#45;keyword">true</span>
  screenshotOnAssertionFailure <span class="java&#45;keyword">true</span>
  maxWidth 400
&#125;<p class="paragraph"/>concordion.loggingTooltipExtensionFactoryConfiguration = &#123;
  loggers <span class="java&#45;quote">"org.example.pomodoro.pages, selenium.events"</span>
  level Level.FINE
  showConsoleLogging <span class="java&#45;keyword">true</span>
&#125;</pre></div><p class="paragraph"/>The following table shows the configuration options available to configure the <code>ConfigurableScreenshotExtensionFactory</code>:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Option</strong></th><th><strong class="bold">Default value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>screenshotOnAssertionFailure</td><td><code>true</code></td><td>Sets whether screenshots will be embedded in the output when assertions fail.</td></tr><tr class="table-even"><td>screenshotOnAssertionSuccess</td><td><code>false</code></td><td>Sets whether screenshots will be embedded in the output when assertions pass.</td></tr><tr class="table-odd"><td>screenshotOnThrowable</td><td><code>true</code></td><td>Sets whether screenshots will be embedded in the output when uncaught Throwables occur in the test.</td></tr><tr class="table-even"><td>maxWidth</td><td>Any</td><td>Sets the maximum width that will be used for display of the images in the output.</td></tr><tr class="table-odd"><td>screenshotTaker</td><td>Take a shot of the full visible screen.</td><td>Set a custom screenshot taker.</td></tr></table><p class="paragraph"/>
The following table shows the configuration options available to configure the <code>ConfigurableLoggingTooltipExtensionFactory</code>:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Option</strong></th><th><strong class="bold">Default value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>loggers</td><td>Empty string (indicates the root logger).</td><td>A comma separated list of the names of loggers whose output is to be shown in the Concordion output.</td></tr><tr class="table-even"><td>level</td><td><code>Level.INFO</code></td><td>the logging <code>java.util.logging.Level</code> for the handler that writes to the Concordion output. Log messages of this level and higher will be output.</td></tr><tr class="table-odd"><td>showConsoleLogging</td><td><code>false</code></td><td><code>false</code> to remove console output for the root logger, <code>true</code> to show the console output.</td></tr></table><p class="paragraph"/><p class="paragraph"/>
    </body>
</html>
